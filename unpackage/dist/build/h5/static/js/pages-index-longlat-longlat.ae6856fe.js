(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-longlat-longlat"],{1003:function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}t.exports=n},1148:function(t,e,o){"use strict";var n=o("a691"),i=o("1d80");t.exports="".repeat||function(t){var e=String(i(this)),o="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(o+=e);return o}},"2a41":function(t,e,o){"use strict";var n=o("62cb"),i=o.n(n);i.a},"408a":function(t,e,o){var n=o("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"62cb":function(t,e,o){var n=o("d317");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("71dd4128",n,!0,{sourceMap:!1,shadowMode:!1})},"64fe":function(t,e,o){"use strict";(function(t){o("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("d655"),i={data:function(){return{cityName:"深圳",latitude:"",longitude:"",qqmapsdk:null,key:"W4WBZ-TUD65-IDAIR-QPM36-HMFQ5-CGBZP"}},onLoad:function(){var t=this;this.$eventHub.$on("emit",(function(e){t.cityName=e,t.getLonglatByLocation()})),this.qqmapsdk=new n({key:this.key}),setTimeout((function(){t.getLonglatByLocation()}),200)},methods:{getLonglatByLocation:function(){var t=this,e="https://apis.map.qq.com/ws/geocoder/v1/?address=".concat(this.cityName,"&key=").concat(this.key,"&callbackName=QQmap&output=jsonp");this.tui.tuiJsonp(e,(function(e){0===e.status&&(t.latitude=e.result.location.lat,t.longitude=e.result.location.lng)}),"QQmap")},getLocationByLonglat:function(e,o){var n="https://apis.map.qq.com/ws/geocoder/v1/?location=".concat(e+","+o,"&key=").concat(this.key,"&callbackName=QQmap&output=jsonp&coord_type=5&get_poi=0");this.tui.tuiJsonp(n,(function(e){0===e.status&&t.log(e.result.address_component)}),"QQmap")},selectCity:function(){uni.navigateTo({url:"../selectCity/selectCity"})}}};e.default=i}).call(this,o("5a52")["default"])},"921d":function(t,e,o){"use strict";var n,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"container"},[o("v-uni-view",{staticClass:"result"},[o("v-uni-view",{staticClass:"city"},[t._v("所选城市："+t._s(t.cityName))]),o("v-uni-view",{staticClass:"city"},[t._v("latitude："+t._s(t.latitude))]),o("v-uni-view",[t._v("longitude："+t._s(t.longitude))])],1),o("v-uni-view",{staticClass:"btn-box"},[o("v-uni-button",{staticClass:"tui-button-primary",attrs:{"hover-class":"tui-button-hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectCity.apply(void 0,arguments)}}},[t._v("请选择地址")])],1),o("v-uni-view",{staticClass:"tips"},[t._v("温馨提示：例子为地址转经纬度，经纬度转地址的例子也包含在此代码中，请从GitHub下载源码查看")])],1)},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},ac0e:function(t,e,o){"use strict";o.r(e);var n=o("921d"),i=o("f71c");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("2a41");var r,s=o("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"2438266c",null,!1,n["a"],r);e["default"]=l.exports},b6802:function(t,e,o){"use strict";var n=o("23e7"),i=o("a691"),a=o("408a"),r=o("1148"),s=o("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,o){return 0===e?o:e%2===1?u(t,e-1,o*t):u(t*t,e/2,o)},d=function(t){var e=0,o=t;while(o>=4096)e+=12,o/=4096;while(o>=2)e+=1,o/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));n({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,o,n,s,l=a(this),f=i(t),p=[0,0,0,0,0,0],g="",v="0",y=function(t,e){var o=-1,n=e;while(++o<6)n+=t*p[o],p[o]=n%1e7,n=c(n/1e7)},_=function(t){var e=6,o=0;while(--e>=0)o+=p[e],p[e]=c(o/t),o=o%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var o=String(p[t]);e=""===e?o:e+r.call("0",7-o.length)+o}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(e=d(l*u(2,69,1))-69,o=e<0?l*u(2,-e,1):l/u(2,e,1),o*=4503599627370496,e=52-e,e>0){y(0,o),n=f;while(n>=7)y(1e7,0),n-=7;y(u(10,n,1),0),n=e-1;while(n>=23)_(1<<23),n-=23;_(1<<n),y(1,1),_(2),v=m()}else y(0,o),y(1<<-e,0),v=m()+r.call("0",f);return f>0?(s=v.length,v=g+(s<=f?"0."+r.call("0",f-s)+v:v.slice(0,s-f)+"."+v.slice(s-f))):v=g+v,v}})},d317:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".result[data-v-2438266c]{padding:%?80?% %?50?% %?80?% %?50?%;background:#fff;color:#333;font-size:%?32?%}.city[data-v-2438266c]{padding-bottom:%?30?%}.btn-box[data-v-2438266c]{padding:%?80?% %?32?% %?30?% %?32?%}.tips[data-v-2438266c]{padding:%?30?%;font-size:%?26?%;color:#666}",""]),t.exports=e},d655:function(t,e,o){o("4de4"),o("b6802"),o("acd8"),o("ac1f"),o("1276");var n=o("df34"),i=o("1003"),a={KEY_ERR:311,KEY_ERR_MSG:"key格式错误",PARAM_ERR:310,PARAM_ERR_MSG:"请求参数信息有误",SYSTEM_ERR:600,SYSTEM_ERR_MSG:"系统错误",WX_ERR_CODE:1e3,WX_OK_CODE:200},r="https://apis.map.qq.com/ws/",s=r+"place/v1/search",l=r+"place/v1/suggestion",c=r+"geocoder/v1/",u=r+"district/v1/list",d=r+"district/v1/getchildren",f=r+"distance/v1/",p=6378136.49,g={location2query:function(t){if("string"==typeof t)return t;for(var e="",o=0;o<t.length;o++){var n=t[o];e&&(e+=";"),n.location&&(e=e+n.location.lat+","+n.location.lng),n.latitude&&n.longitude&&(e=e+n.latitude+","+n.longitude)}return e},rad:function(t){return t*Math.PI/180},getEndLocation:function(t){for(var e=t.split(";"),o=[],n=0;n<e.length;n++)o.push({lat:parseFloat(e[n].split(",")[0]),lng:parseFloat(e[n].split(",")[1])});return o},getDistance:function(t,e,o,n){var i=this.rad(t),a=this.rad(o),r=i-a,s=this.rad(e)-this.rad(n),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(i)*Math.cos(a)*Math.pow(Math.sin(s/2),2)));return l*=p,l=Math.round(1e4*l)/1e4,parseFloat(l.toFixed(0))},getWXLocation:function(t,e,o){wx.getLocation({type:"gcj02",success:t,fail:e,complete:o})},getLocationParam:function(t){if("string"==typeof t){var e=t.split(",");t=2===e.length?{latitude:t.split(",")[0],longitude:t.split(",")[1]}:{}}return t},polyfillParam:function(t){t.success=t.success||function(){},t.fail=t.fail||function(){},t.complete=t.complete||function(){}},checkParamKeyEmpty:function(t,e){if(!t[e]){var o=this.buildErrorConfig(a.PARAM_ERR,a.PARAM_ERR_MSG+e+"参数格式有误");return t.fail(o),t.complete(o),!0}return!1},checkKeyword:function(t){return!this.checkParamKeyEmpty(t,"keyword")},checkLocation:function(t){var e=this.getLocationParam(t.location);if(!e||!e.latitude||!e.longitude){var o=this.buildErrorConfig(a.PARAM_ERR,a.PARAM_ERR_MSG+" location参数格式有误");return t.fail(o),t.complete(o),!1}return!0},buildErrorConfig:function(t,e){return{status:t,message:e}},handleData:function(t,e,o){if("search"===o){for(var n=e.data,i=[],a=0;a<n.length;a++)i.push({id:n[a].id||null,title:n[a].title||null,latitude:n[a].location&&n[a].location.lat||null,longitude:n[a].location&&n[a].location.lng||null,address:n[a].address||null,category:n[a].category||null,tel:n[a].tel||null,adcode:n[a].ad_info&&n[a].ad_info.adcode||null,city:n[a].ad_info&&n[a].ad_info.city||null,district:n[a].ad_info&&n[a].ad_info.district||null,province:n[a].ad_info&&n[a].ad_info.province||null});t.success(e,{searchResult:n,searchSimplify:i})}else if("suggest"===o){var r=e.data,s=[];for(a=0;a<r.length;a++)s.push({adcode:r[a].adcode||null,address:r[a].address||null,category:r[a].category||null,city:r[a].city||null,district:r[a].district||null,id:r[a].id||null,latitude:r[a].location&&r[a].location.lat||null,longitude:r[a].location&&r[a].location.lng||null,province:r[a].province||null,title:r[a].title||null,type:r[a].type||null});t.success(e,{suggestResult:r,suggestSimplify:s})}else if("reverseGeocoder"===o){var l=e.result,c={address:l.address||null,latitude:l.location&&l.location.lat||null,longitude:l.location&&l.location.lng||null,adcode:l.ad_info&&l.ad_info.adcode||null,city:l.address_component&&l.address_component.city||null,district:l.address_component&&l.address_component.district||null,nation:l.address_component&&l.address_component.nation||null,province:l.address_component&&l.address_component.province||null,street:l.address_component&&l.address_component.street||null,street_number:l.address_component&&l.address_component.street_number||null,recommend:l.formatted_addresses&&l.formatted_addresses.recommend||null,rough:l.formatted_addresses&&l.formatted_addresses.rough||null};if(l.pois){var u=l.pois,d=[];for(a=0;a<u.length;a++)d.push({id:u[a].id||null,title:u[a].title||null,latitude:u[a].location&&u[a].location.lat||null,longitude:u[a].location&&u[a].location.lng||null,address:u[a].address||null,category:u[a].category||null,adcode:u[a].ad_info&&u[a].ad_info.adcode||null,city:u[a].ad_info&&u[a].ad_info.city||null,district:u[a].ad_info&&u[a].ad_info.district||null,province:u[a].ad_info&&u[a].ad_info.province||null});t.success(e,{reverseGeocoderResult:l,reverseGeocoderSimplify:c,pois:u,poisSimplify:d})}else t.success(e,{reverseGeocoderResult:l,reverseGeocoderSimplify:c})}else if("geocoder"===o){var f=e.result,p={title:f.title||null,latitude:f.location&&f.location.lat||null,longitude:f.location&&f.location.lng||null,adcode:f.ad_info&&f.ad_info.adcode||null,province:f.address_components&&f.address_components.province||null,city:f.address_components&&f.address_components.city||null,district:f.address_components&&f.address_components.district||null,street:f.address_components&&f.address_components.street||null,street_number:f.address_components&&f.address_components.street_number||null,level:f.level||null};t.success(e,{geocoderResult:f,geocoderSimplify:p})}else if("getCityList"===o){var g=e.result[0],v=e.result[1],y=e.result[2];t.success(e,{provinceResult:g,cityResult:v,districtResult:y})}else if("getDistrictByCityId"===o){var _=e.result[0];t.success(e,_)}else if("calculateDistance"===o){var m=e.result.elements,h=[];for(a=0;a<m.length;a++)h.push(m[a].distance);t.success(e,{calculateDistanceResult:m,distance:h})}else t.success(e)},buildWxRequestConfig:function(t,e,o){var n=this;return e.header={"content-type":"application/json"},e.method="GET",e.success=function(e){var i=e.data;0===i.status?n.handleData(t,i,o):t.fail(i)},e.fail=function(e){e.statusCode=a.WX_ERR_CODE,t.fail(n.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},e.complete=function(e){var o=+e.statusCode;switch(o){case a.WX_ERR_CODE:t.complete(n.buildErrorConfig(a.WX_ERR_CODE,e.errMsg));break;case a.WX_OK_CODE:var i=e.data;0===i.status?t.complete(i):t.complete(n.buildErrorConfig(i.status,i.message));break;default:t.complete(n.buildErrorConfig(a.SYSTEM_ERR,a.SYSTEM_ERR_MSG))}},e},locationProcess:function(t,e,o,n){var i=this;if(o=o||function(e){e.statusCode=a.WX_ERR_CODE,t.fail(i.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},n=n||function(e){e.statusCode==a.WX_ERR_CODE&&t.complete(i.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},t.location){if(i.checkLocation(t)){var r=g.getLocationParam(t.location);e(r)}}else i.getWXLocation(e,o,n)}},v=function(){"use strict";function t(e){if(n(this,t),!e.key)throw Error("key值不能为空");this.key=e.key}return i(t,[{key:"search",value:function(t){var e=this;if(t=t||{},g.polyfillParam(t),g.checkKeyword(t)){var o={keyword:t.keyword,orderby:t.orderby||"_distance",page_size:t.page_size||10,page_index:t.page_index||1,output:"json",key:e.key};t.address_format&&(o.address_format=t.address_format),t.filter&&(o.filter=t.filter);var n=t.distance||"1000",i=t.auto_extend||1,a=null,r=null;t.region&&(a=t.region),t.rectangle&&(r=t.rectangle);var l=function(e){o.boundary=a&&!r?"region("+a+","+i+","+e.latitude+","+e.longitude+")":r&&!a?"rectangle("+r+")":"nearby("+e.latitude+","+e.longitude+","+n+","+i+")",wx.request(g.buildWxRequestConfig(t,{url:s,data:o},"search"))};g.locationProcess(t,l)}}},{key:"getSuggestion",value:function(t){var e=this;if(t=t||{},g.polyfillParam(t),g.checkKeyword(t)){var o={keyword:t.keyword,region:t.region||"全国",region_fix:t.region_fix||0,policy:t.policy||0,page_size:t.page_size||10,page_index:t.page_index||1,get_subpois:t.get_subpois||0,output:"json",key:e.key};if(t.address_format&&(o.address_format=t.address_format),t.filter&&(o.filter=t.filter),t.location){var n=function(e){o.location=e.latitude+","+e.longitude,wx.request(g.buildWxRequestConfig(t,{url:l,data:o},"suggest"))};g.locationProcess(t,n)}else wx.request(g.buildWxRequestConfig(t,{url:l,data:o},"suggest"))}}},{key:"reverseGeocoder",value:function(t){var e=this;t=t||{},g.polyfillParam(t);var o={coord_type:t.coord_type||5,get_poi:t.get_poi||0,output:"json",key:e.key};t.poi_options&&(o.poi_options=t.poi_options);var n=function(e){o.location=e.latitude+","+e.longitude,wx.request(g.buildWxRequestConfig(t,{url:c,data:o},"reverseGeocoder"))};g.locationProcess(t,n)}},{key:"geocoder",value:function(t){var e=this;if(t=t||{},g.polyfillParam(t),!g.checkParamKeyEmpty(t,"address")){var o={address:t.address,output:"json",key:e.key};t.region&&(o.region=t.region),wx.request(g.buildWxRequestConfig(t,{url:c,data:o},"geocoder"))}}},{key:"getCityList",value:function(t){var e=this;t=t||{},g.polyfillParam(t);var o={output:"json",key:e.key};wx.request(g.buildWxRequestConfig(t,{url:u,data:o},"getCityList"))}},{key:"getDistrictByCityId",value:function(t){var e=this;if(t=t||{},g.polyfillParam(t),!g.checkParamKeyEmpty(t,"id")){var o={id:t.id||"",output:"json",key:e.key};wx.request(g.buildWxRequestConfig(t,{url:d,data:o},"getDistrictByCityId"))}}},{key:"calculateDistance",value:function(t){var e=this;if(t=t||{},g.polyfillParam(t),!g.checkParamKeyEmpty(t,"to")){var o={mode:t.mode||"walking",to:g.location2query(t.to),output:"json",key:e.key};if(t.from&&(t.location=t.from),"straight"==o.mode){var n=function(e){for(var n=g.getEndLocation(o.to),i={message:"query ok",result:{elements:[]},status:0},a=0;a<n.length;a++)i.result.elements.push({distance:g.getDistance(e.latitude,e.longitude,n[a].lat,n[a].lng),duration:0,from:{lat:e.latitude,lng:e.longitude},to:{lat:n[a].lat,lng:n[a].lng}});var r=i.result.elements,s=[];for(a=0;a<r.length;a++)s.push(r[a].distance);return t.success(i,{calculateResult:r,distanceResult:s})};g.locationProcess(t,n)}else{n=function(e){o.from=e.latitude+","+e.longitude,wx.request(g.buildWxRequestConfig(t,{url:f,data:o},"calculateDistance"))};g.locationProcess(t,n)}}}}]),t}();t.exports=v},df34:function(t,e){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=o},f71c:function(t,e,o){"use strict";o.r(e);var n=o("64fe"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a}}]);